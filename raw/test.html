
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>Display en image loaded with XMLHttpRequest</title>
				
	</head>
	<body>
		
<img src="" id="myimg" >

<br>

	</body>
</html>



<script type="text/javascript">


function loadImage( ) {
    var xmlHttp;
    try {  // Firefox, Opera 8.0+, Safari  
        xmlHttp = new XMLHttpRequest(); 
        if (xmlHttp.overrideMimeType) {
            xmlHttp.overrideMimeType('text/xml');
        }
    }
    catch (e) {  
    // Internet Explorer  
        try {    
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP"); 
        }
          catch (e) {    
              try {      
                  xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");      
              }
            catch (e) {      
                alert("Your browser does not support AJAX!");      
                return false;      
            }    
        }  
    } 
    xmlHttp.onreadystatechange = function() {
        if(xmlHttp.readyState == 4) {
              var xmlData = xmlHttp.responseXML;
				console.log(xmlHttp.responseXML.getElementsByTagName('img')[0]);
				//console.log(xmlHttp.responseXML.getElementsByTagName('input'));
        }
    } 
    var url = "/";
    xmlHttp.open("GET", url, true);
      xmlHttp.send(null);
}
loadImage();


/*
//make sure to use an image on the same server 
var url="/public/nc.png";

var xhr = getXMLHttpRequest();
xhr.onreadystatechange=ProcessResponse;
xhr.open("GET",url, true);
//xhr.overrideMimeType('text/plain; charset=x-user-defined'); 
xhr.send(null);

//------------------------------------
function getXMLHttpRequest() {
	var xhr = null;
	
	if (window.XMLHttpRequest || window.ActiveXObject) {
		if (window.ActiveXObject) {
			try {
				xhr = new ActiveXObject("Msxml2.XMLHTTP");
			} catch(e) {
				xhr = new ActiveXObject("Microsoft.XMLHTTP");
			}
		} else {
			xhr = new XMLHttpRequest(); 
		}
	} else {
		alert("Your browser does not support XMLHTTP");
		return null;
	}
	
	return xhr;
}

//------------------------------------
function ProcessResponse()
    {
      if(xhr.readyState==4)
      {
            var img=document.getElementById("myimg");
            img.src="data:image/jpeg;base64," + encode64(xhr.responseText);
            img.style.display="";
      }
    }

//--------------------------------------------------
function encode64(inputStr) 
{
   var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
   var outputStr = "";
   var i = 0;
   
   while (i<inputStr.length)
   {
      //all three "& 0xff" added below are there to fix a known bug 
      //with bytes returned by xhr.responseText
      var byte1 = inputStr.charCodeAt(i++) & 0xff;
      var byte2 = inputStr.charCodeAt(i++) & 0xff;
      var byte3 = inputStr.charCodeAt(i++) & 0xff;

      var enc1 = byte1 >> 2;
      var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);
	  
	  var enc3, enc4;
	  if (isNaN(byte2))
	   {
		enc3 = enc4 = 64;
	   }
	  else
	  {
      	enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);
		if (isNaN(byte3))
		  {
           enc4 = 64;
		  }
		else
		  {
	      	enc4 = byte3 & 63;
		  }
	  }

      outputStr +=  b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);
   } 
   
   return outputStr;
}
*/
</script>